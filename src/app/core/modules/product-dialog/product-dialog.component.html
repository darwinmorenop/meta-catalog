<h2 mat-dialog-title>{{ isEditMode ? 'Editar Producto' : 'Nuevo Producto' }}</h2>

<mat-dialog-content>
  <form [formGroup]="form">
    <mat-stepper orientation="vertical" #stepper [linear]="false">

      <!-- Step 1: Detalles Básicos -->
      <mat-step label="Detalles Básicos">
        <div class="col-2">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>ID</mat-label>
            <input matInput formControlName="id" required>
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Marca</mat-label>
            <input matInput formControlName="brand">
          </mat-form-field>
        </div>

        <div class="col-2">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Código Remoto</mat-label>
            <input matInput formControlName="remoteCode">
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Código Comercial</mat-label>
            <input matInput formControlName="productCommercialCode">
          </mat-form-field>
        </div>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Título</mat-label>
          <input matInput formControlName="title" required>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Resumen (Backend)</mat-label>
          <textarea matInput formControlName="summary" rows="2"></textarea>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Descripción</mat-label>
          <textarea matInput formControlName="description" rows="3"></textarea>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Condición</mat-label>
          <mat-select formControlName="condition">
            <mat-option value="new">Nuevo</mat-option>
            <mat-option value="used">Usado</mat-option>
            <mat-option value="refurbished">Refurbished</mat-option>
          </mat-select>
        </mat-form-field>

        <div class="stepper-actions">
          <button mat-button matStepperNext>Siguiente</button>
        </div>
      </mat-step>

      <!-- Step 2: Precios y Stock -->
      <mat-step label="Precios y Stock">
        <div class="col-2">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Precio</mat-label>
            <input matInput formControlName="price" placeholder="10.00 USD">
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Precio Oferta</mat-label>
            <input matInput formControlName="sale_price">
          </mat-form-field>
        </div>

        <div class="col-2">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Disponibilidad</mat-label>
            <mat-select formControlName="availability">
              <mat-option value="in stock">In Stock</mat-option>
              <mat-option value="out of stock">Out of Stock</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Cantidad para FB</mat-label>
            <input matInput type="number" formControlName="quantity_to_sell_on_facebook">
          </mat-form-field>
        </div>

        <div class="stepper-actions">
          <button mat-button matStepperPrevious>Atrás</button>
          <button mat-button matStepperNext>Siguiente</button>
        </div>
      </mat-step>

      <!-- Step 3: Multimedia y Links -->
      <mat-step label="Multimedia y Links">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Link Producto</mat-label>
          <input matInput formControlName="link">
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Link Imagen</mat-label>
          <input matInput formControlName="image_link">
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Link Imagen Adicional</mat-label>
          <input matInput formControlName="additional_image_link">
        </mat-form-field>

        <div class="stepper-actions">
          <button mat-button matStepperPrevious>Atrás</button>
          <button mat-button matStepperNext>Siguiente</button>
        </div>
      </mat-step>

      <!-- Step 4: Categorización y Atributos -->
      <mat-step label="Categorización y Atributos">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Categoría Google</mat-label>
          <input matInput formControlName="google_product_category">
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Categoría Facebook</mat-label>
          <input matInput formControlName="fb_product_category">
        </mat-form-field>

        <div class="col-2">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Género</mat-label>
            <mat-select formControlName="gender">
              <mat-option value="">--</mat-option>
              <mat-option value="male">Hombre</mat-option>
              <mat-option value="female">Mujer</mat-option>
              <mat-option value="unisex">Unisex</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Edad</mat-label>
            <mat-select formControlName="age_group">
              <mat-option value="">--</mat-option>
              <mat-option value="adult">Adulto</mat-option>
              <mat-option value="all ages">Todas las edades</mat-option>
              <mat-option value="kids">Niños</mat-option>
              <mat-option value="toddler">Bebés</mat-option>
              <mat-option value="infant">Infantes</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="col-2">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Color</mat-label>
            <input matInput formControlName="color">
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Talla</mat-label>
            <input matInput formControlName="size">
          </mat-form-field>
        </div>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Material</mat-label>
          <input matInput formControlName="material">
        </mat-form-field>

        <div class="stepper-actions">
          <button mat-button matStepperPrevious>Atrás</button>
          <button mat-button matStepperNext>Siguiente</button>
        </div>
      </mat-step>

      <!-- Step 5: Envio y Otros -->
      <mat-step label="Envío y Otros">
        <div class="col-2">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Shipping String</mat-label>
            <input matInput formControlName="shipping">
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Peso Envío</mat-label>
            <input matInput formControlName="shipping_weight">
          </mat-form-field>
        </div>

        <div class="col-2">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>GTIN</mat-label>
            <input matInput formControlName="gtin">
          </mat-form-field>

          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Tags (Tag 1)</mat-label>
            <input matInput formControlName="product_tags_0">
          </mat-form-field>
        </div>

        <div class="stepper-actions">
          <button mat-button matStepperPrevious>Atrás</button>
          <button mat-button color="primary" raised (click)="save()" [disabled]="form.invalid">Guardar</button>
        </div>
      </mat-step>

    </mat-stepper>
  </form>
</mat-dialog-content>