<div class="section-container">
    <div class="grid-layout">
        <mat-card class="info-card stock-summary">
            <mat-card-header>
                <mat-card-title>Resumen de Inventario</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <div class="status-indicator" [attr.data-status]="stockStatus()">
                    <mat-icon>{{ stockStatus() === 'out' ? 'error' : (stockStatus() === 'low' ? 'warning' : 'check_circle') }}</mat-icon>
                    <span>{{ stockStatus() === 'out' ? 'Sin Stock' : (stockStatus() === 'low' ? 'Stock Bajo' : 'En Stock') }}</span>
                </div>

                <div class="total-display">
                    <span class="label">Stock Total</span>
                    <span class="value">{{ totalStock() }}</span>
                </div>

                <mat-divider></mat-divider>

                <div class="stock-breakdown">
                    <div class="breakdown-item">
                        <span class="label">Interno (Disponible)</span>
                        <span class="value">{{ stock()?.internal_stock || 0 }}</span>
                    </div>
                    <div class="breakdown-item">
                        <span class="label">Fabricante / Externo</span>
                        <span class="value">{{ stock()?.manufacturer_stock || 0 }}</span>
                    </div>
                </div>
            </mat-card-content>
        </mat-card>

        <mat-card class="info-card alerts">
            <mat-card-header>
                <mat-card-title>Alertas y Umbrales</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <div class="alert-config">
                    <span class="label">Umbral de Alerta</span>
                    <div class="value-row">
                        <span class="value">{{ stock()?.min_stock_alert || 10 }} unidades</span>
                        <mat-icon color="primary">settings_suggest</mat-icon>
                    </div>
                    <p class="helper-text">Se notificar√° cuando el stock interno sea inferior a este valor.</p>
                </div>

                <div class="progress-section" *ngIf="stock()?.internal_stock !== undefined">
                    <div class="progress-labels">
                        <span>Nivel de Stock Interno</span>
                        <span>{{ stock()!.internal_stock }} / 100</span>
                    </div>
                    <mat-progress-bar mode="determinate" [value]="stock()!.internal_stock" [color]="isLowStock() ? 'warn' : 'primary'"></mat-progress-bar>
                </div>
            </mat-card-content>
        </mat-card>
    </div>
</div>
